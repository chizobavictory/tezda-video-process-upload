{"ast":null,"code":"var _jsxFileName = \"/Users/echelon/Documents/GitHub/tezda/tezda-video-streaming/src/components/Transactions.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport axios from 'axios';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport FileBase64 from 'react-file-base64';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Transactions = () => {\n  _s();\n  const [userId, setUserId] = useState('');\n  const [description, setDescription] = useState('');\n  const [videoData, setVideoData] = useState(null);\n  const [uploadResponse, setUploadResponse] = useState(null);\n  const [detailsResponse, setDetailsResponse] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [loadingMessage, setLoadingMessage] = useState(null);\n  const [requestBody, setRequestBody] = useState({\n    location: '',\n    ipAddress: '',\n    description: ''\n  });\n  const [phone, setPhone] = useState('');\n  const [responseText, setResponseText] = useState('');\n  const handlePhoneChange = event => {\n    setPhone(event.target.value);\n  };\n  const handleCheckPhone = async () => {\n    if (!phone) {\n      toast.error('Please enter a phone number');\n      return;\n    }\n    setLoading(true);\n    try {\n      const apiUrl = 'https://api.tezda.tech/auth/t/checkPhone';\n      const apiKey = 'SytJWAJ6YB7BoiXOwu2Zp5rMLaIGD1at1EqNvnMT';\n      const response = await axios.post(apiUrl, {\n        phone\n      }, {\n        headers: {\n          'x-api-key': apiKey\n        }\n      });\n      setResponseText(JSON.stringify(response.data, null, 2));\n      toast.success('Phone number checked successfully');\n    } catch (error) {\n      console.error('Error checking phone number:', error);\n      toast.error('Failed to check phone number');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const videoRef = useRef(null);\n  const handleUserIdChange = event => {\n    setUserId(event.target.value);\n  };\n  const handleDescriptionChange = event => {\n    setDescription(event.target.value);\n    setRequestBody({\n      ...requestBody,\n      description: event.target.value\n    });\n  };\n  const getItemIdFromPresignedUrl = presignedUrl => {\n    try {\n      const url = new URL(presignedUrl);\n      const path = url.pathname;\n      const pathParts = path.split('/');\n      const fileName = pathParts[pathParts.length - 1];\n      // Remove the file extension, assuming it's always \".mp4\"\n      const itemId = fileName.replace(/\\.mp4$/, '');\n      return itemId;\n    } catch (error) {\n      console.error('Error extracting item ID from presigned URL:', error);\n      return null;\n    }\n  };\n  const handleVideoUpload = file => {\n    setVideoData(file.file);\n  };\n  const handleUpload = async () => {\n    if (!userId || !videoData) {\n      toast.error('Please enter user ID and select a video');\n      return;\n    }\n    const presignedUrlEndpoint = `https://kl8no40qhb.execute-api.eu-west-2.amazonaws.com/test/user/createUserUploadPresignedUrl?user_id=${userId}`;\n    try {\n      setLoading(true);\n\n      // Step 1: Request a presigned URL\n      const presignedUrlResponse = await axios.post(presignedUrlEndpoint, requestBody, {\n        headers: {\n          'x-api-key': 'fwKwNZDxCRJpMWkLXetP1UQHnuUNqj65bCVXe159'\n        }\n      });\n      console.log('Response from presigned URL request:', presignedUrlResponse);\n      const user_id = presignedUrlResponse.data.user_id;\n      const presignedUrl = presignedUrlResponse.data.data;\n\n      // Step 2: Upload the video to S3 using the presigned URL\n      console.log('Uploading video data:', videoData);\n      await axios.put(presignedUrl, videoData, {\n        headers: {\n          'Content-Type': 'video/mp4',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n      const item_id = getItemIdFromPresignedUrl(presignedUrl);\n\n      // Step 3: After a successful upload, you can now trigger other actions or display a success message.\n      setUploadResponse({\n        message: 'Video uploaded successfully',\n        data: {\n          presignedUrl,\n          item_id,\n          user_id\n        }\n      });\n      toast.success('Video uploaded successfully!');\n    } catch (error) {\n      console.error('Error during upload:', error);\n      if (error.response) {\n        toast.error(`Error during upload: ${error.response.data.message}`);\n      } else {\n        toast.error('Unexpected error uploading video. Please try again later.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  const expectedAttributes = ['item_id', 'parentLabels', 'creation_timestamp', 'genre', 'video_duration', 'adaptiveBitrateS3Url', 'adaptiveBitrateS3Url720p', 'childLabels', 'adaptiveBitrateS3Url360p', 'videoS3Url', 'user_id', 'adaptiveBitrateS3Url540p'];\n  const handleGetDetails = async () => {\n    const startTime = performance.now();\n    if (!uploadResponse) {\n      toast.error('Please upload a video first');\n      return;\n    }\n    try {\n      setLoadingMessage('Loading all video details...');\n      setLoading(true);\n      toast.info('Loading all video details...');\n\n      // Hit the details endpoint once\n      const detailsEndpoint = `https://kl8no40qhb.execute-api.eu-west-2.amazonaws.com/test/user/findUserShortVideo?item_id=${uploadResponse.data.item_id}`;\n      const detailsResponse = await axios.get(detailsEndpoint, {\n        headers: {\n          'x-api-key': 'fwKwNZDxCRJpMWkLXetP1UQHnuUNqj65bCVXe159'\n        }\n      });\n      console.log('Response from get details endpoint:', detailsResponse);\n      setDetailsResponse(detailsResponse.data);\n      const endTime = performance.now();\n\n      // Check completeness of the response\n      const isResponseComplete = expectedAttributes.every(attr => attr in detailsResponse.data.data);\n      if (isResponseComplete) {\n        toast.success('Video details loaded successfully!');\n        // Calculate and update the time taken\n        const timeTaken = (endTime - startTime) / 100; // Convert to seconds\n        setTimeTaken(timeTaken);\n\n        // Auto-load the uploaded video into the video player\n        if (videoRef.current) {\n          // Assuming the video URL is correctly returned from the API\n          const videoUrl = detailsResponse.data.data.videoS3Url;\n          videoRef.current.src = videoUrl;\n          videoRef.current.load();\n          videoRef.current.play(); // Auto-play the video if needed\n        }\n      } else {\n        setLoadingMessage('Loading all video details...');\n        console.log('Incomplete response. Missing attributes:', expectedAttributes.filter(attr => !(attr in detailsResponse.data.data)));\n        // toast.error(\"Incomplete response. Give it some time.\");\n      }\n    } catch (error) {\n      // toast.error(\"Error getting video details. Please try again later.\");\n      console.error('Error getting video details:', error);\n      setLoadingMessage('Error getting video details. Please try again later.');\n    } finally {\n      setLoading(false);\n      setLoadingMessage(null); // Reset loading message after handling response\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col md:pt-15 pt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col md:flex-row justify-between gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-neutral-900 flex flex-col gap-4 md:flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-[degularbold] md:text-2xl text-xl\",\n            children: \"Upload Video Logic\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-[degularmedium] text-gray-600\",\n            children: [\"To uplod a video and stream you first login with your phone number. The token and cookies for that user is stored and used to upload the vide and view the video respectively. \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 53\n            }, this), \" Enter the video details - visibilty and description. The other parameters for a video are added in the background. \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 40\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2 justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-1 w-full\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"phone\",\n                className: \"font-semibold text-lg\",\n                children: \"Enter Phone Number:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"phone\",\n                type: \"text\",\n                value: phone,\n                onChange: handlePhoneChange,\n                placeholder: \"Enter phone number\",\n                className: \"bg-gray-100 text-gray-900 p-2 rounded-md mt-2 w-full focus:outline-none focus:ring focus:border-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleCheckPhone,\n                className: \"bg-blue-500 text-white p-2 rounded-md mt-2 hover:bg-blue-700 focus:outline-none focus:ring focus:border-blue-500 w-full\",\n                disabled: loading,\n                children: loading ? 'Checking...' : 'Check Phone'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 w-full\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-lg font-semibold mb-2\",\n                children: \"Response:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                className: \"bg-gray-100 p-4 text-sm rounded-md overflow-auto\",\n                children: responseText\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-1 w-full\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"video-details\",\n                className: \"font-semibold text-lg\",\n                children: \"Video Details:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"video-details\",\n                type: \"text\",\n                value: phone // Assuming this should be replaced with appropriate state variable\n                ,\n                onChange: handleDescriptionChange,\n                placeholder: \"Enter description\",\n                className: \"bg-gray-100 text-gray-900 p-2 rounded-md mt-2 w-full focus:outline-none focus:ring focus:border-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"visibility\",\n                className: \"bg-gray-100 text-gray-900 p-2 rounded-md mt-2 w-full focus:outline-none focus:ring focus:border-blue-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"public\",\n                  children: \"Public\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"private\",\n                  children: \"Private\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"personal\",\n                  children: \"Personal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-4 h-4 fill-current\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  viewBox: \"0 0 20 20\",\n                  fill: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    fillRule: \"evenodd\",\n                    d: \"M7.293 11.293a1 1 0 0 1 1.414 0L10 12.586l1.293-1.293a1 1 0 1 1 1.414 1.414l-2 2a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 0-1.414 1 1 0 0 1 0-1.414z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col gap-2 md:w-1/2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-[degularsemibold] text-xl\",\n            children: \"Select Video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-500\",\n            children: /*#__PURE__*/_jsxDEV(FileBase64, {\n              multiple: false,\n              onDone: handleVideoUpload\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleUpload,\n          className: \"w-full bg-blue-500 text-white p-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring focus:border-blue-500\",\n          children: \"Upload Video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleGetDetails,\n          className: \"w-full bg-green-500 text-white p-2 rounded-md mt-4 hover:bg-blue-700 focus:outline-none focus:ring focus:border-blue-500\",\n          children: \"Get Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full border-t mt-4 border-gray-300\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-lg font-bold mb-2\",\n        children: loadingMessage || 'Loading...'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 9\n    }, this), uploadResponse && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 \",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-bold mb-2\",\n        children: \"Upload Response:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        className: \"bg-gray-100 overflow-auto p-4 text-sm rounded-md\",\n        children: JSON.stringify(uploadResponse, null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 9\n    }, this), detailsResponse && detailsResponse.data && expectedAttributes.every(attr => attr in detailsResponse.data) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 \",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-bold mb-2\",\n        children: \"Full Video Details:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        className: \"bg-gray-100 overflow-auto p-4 text-sm rounded-md\",\n        children: JSON.stringify(detailsResponse, null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-bold mb-2\",\n        children: \"Original Uploaded Video:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        controls: true,\n        width: \"100%\",\n        height: \"auto\",\n        children: \"Your browser does not support the video tag.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 5\n  }, this);\n};\n_s(Transactions, \"I7nOXXWC4LqycUVjUROH96ZEEUU=\");\n_c = Transactions;\nexport default Transactions;\nvar _c;\n$RefreshReg$(_c, \"Transactions\");","map":{"version":3,"names":["React","useState","useRef","axios","toast","ToastContainer","FileBase64","jsxDEV","_jsxDEV","Transactions","_s","userId","setUserId","description","setDescription","videoData","setVideoData","uploadResponse","setUploadResponse","detailsResponse","setDetailsResponse","loading","setLoading","loadingMessage","setLoadingMessage","requestBody","setRequestBody","location","ipAddress","phone","setPhone","responseText","setResponseText","handlePhoneChange","event","target","value","handleCheckPhone","error","apiUrl","apiKey","response","post","headers","JSON","stringify","data","success","console","videoRef","handleUserIdChange","handleDescriptionChange","getItemIdFromPresignedUrl","presignedUrl","url","URL","path","pathname","pathParts","split","fileName","length","itemId","replace","handleVideoUpload","file","handleUpload","presignedUrlEndpoint","presignedUrlResponse","log","user_id","put","item_id","message","expectedAttributes","handleGetDetails","startTime","performance","now","info","detailsEndpoint","get","endTime","isResponseComplete","every","attr","timeTaken","setTimeTaken","current","videoUrl","videoS3Url","src","load","play","filter","className","children","_jsxFileName","lineNumber","columnNumber","htmlFor","id","type","onChange","placeholder","onClick","disabled","xmlns","viewBox","fill","fillRule","d","multiple","onDone","ref","controls","width","height","_c","$RefreshReg$"],"sources":["/Users/echelon/Documents/GitHub/tezda/tezda-video-streaming/src/components/Transactions.tsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport axios from 'axios';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport FileBase64 from 'react-file-base64';\n\nconst Transactions = () => {\n  const [userId, setUserId] = useState<string>('');\n  const [description, setDescription] = useState<string>('');\n  const [videoData, setVideoData] = useState<File | null>(null);\n  const [uploadResponse, setUploadResponse] = useState<any | null>(null);\n  const [detailsResponse, setDetailsResponse] = useState<any | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [loadingMessage, setLoadingMessage] = useState<string | null>(null);\n  const [requestBody, setRequestBody] = useState({ location: '', ipAddress: '', description: '' });\n  const [phone, setPhone] = useState<string>('');\n  const [responseText, setResponseText] = useState<string>('');\n\n  const handlePhoneChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setPhone(event.target.value);\n  };\n\n  const handleCheckPhone = async () => {\n    if (!phone) {\n      toast.error('Please enter a phone number');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const apiUrl = 'https://api.tezda.tech/auth/t/checkPhone';\n      const apiKey = 'SytJWAJ6YB7BoiXOwu2Zp5rMLaIGD1at1EqNvnMT';\n\n      const response = await axios.post(\n        apiUrl,\n        { phone },\n        {\n          headers: {\n            'x-api-key': apiKey,\n          },\n        }\n      );\n\n      setResponseText(JSON.stringify(response.data, null, 2));\n      toast.success('Phone number checked successfully');\n    } catch (error) {\n      console.error('Error checking phone number:', error);\n      toast.error('Failed to check phone number');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  const handleUserIdChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setUserId(event.target.value);\n  };\n\n  const handleDescriptionChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setDescription(event.target.value);\n    setRequestBody({ ...requestBody, description: event.target.value });\n  };\n\n  const getItemIdFromPresignedUrl = (presignedUrl: string) => {\n    try {\n      const url = new URL(presignedUrl);\n      const path = url.pathname;\n      const pathParts = path.split('/');\n      const fileName = pathParts[pathParts.length - 1];\n      // Remove the file extension, assuming it's always \".mp4\"\n      const itemId = fileName.replace(/\\.mp4$/, '');\n      return itemId;\n    } catch (error) {\n      console.error('Error extracting item ID from presigned URL:', error);\n      return null;\n    }\n  };\n\n  const handleVideoUpload = (file: { file: File }) => {\n    setVideoData(file.file);\n  };\n\n  const handleUpload = async () => {\n    if (!userId || !videoData) {\n      toast.error('Please enter user ID and select a video');\n      return;\n    }\n\n    const presignedUrlEndpoint = `https://kl8no40qhb.execute-api.eu-west-2.amazonaws.com/test/user/createUserUploadPresignedUrl?user_id=${userId}`;\n\n    try {\n      setLoading(true);\n\n      // Step 1: Request a presigned URL\n      const presignedUrlResponse = await axios.post(presignedUrlEndpoint, requestBody, {\n        headers: {\n          'x-api-key': 'fwKwNZDxCRJpMWkLXetP1UQHnuUNqj65bCVXe159',\n        },\n      });\n      console.log('Response from presigned URL request:', presignedUrlResponse);\n      const user_id = presignedUrlResponse.data.user_id;\n      const presignedUrl = presignedUrlResponse.data.data;\n\n      // Step 2: Upload the video to S3 using the presigned URL\n      console.log('Uploading video data:', videoData);\n      await axios.put(presignedUrl, videoData, {\n        headers: {\n          'Content-Type': 'video/mp4',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n\n      const item_id = getItemIdFromPresignedUrl(presignedUrl);\n\n      // Step 3: After a successful upload, you can now trigger other actions or display a success message.\n      setUploadResponse({ message: 'Video uploaded successfully', data: { presignedUrl, item_id, user_id } });\n      toast.success('Video uploaded successfully!');\n    } catch (error: any) {\n      console.error('Error during upload:', error);\n\n      if (error.response) {\n        toast.error(`Error during upload: ${error.response.data.message}`);\n      } else {\n        toast.error('Unexpected error uploading video. Please try again later.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const expectedAttributes = [\n    'item_id',\n    'parentLabels',\n    'creation_timestamp',\n    'genre',\n    'video_duration',\n    'adaptiveBitrateS3Url',\n    'adaptiveBitrateS3Url720p',\n    'childLabels',\n    'adaptiveBitrateS3Url360p',\n    'videoS3Url',\n    'user_id',\n    'adaptiveBitrateS3Url540p',\n  ];\n\n  const handleGetDetails = async () => {\n    const startTime = performance.now();\n    if (!uploadResponse) {\n      toast.error('Please upload a video first');\n      return;\n    }\n\n    try {\n      setLoadingMessage('Loading all video details...');\n      setLoading(true);\n      toast.info('Loading all video details...');\n\n      // Hit the details endpoint once\n      const detailsEndpoint = `https://kl8no40qhb.execute-api.eu-west-2.amazonaws.com/test/user/findUserShortVideo?item_id=${uploadResponse.data.item_id}`;\n      const detailsResponse = await axios.get(detailsEndpoint, {\n        headers: {\n          'x-api-key': 'fwKwNZDxCRJpMWkLXetP1UQHnuUNqj65bCVXe159',\n        },\n      });\n      console.log('Response from get details endpoint:', detailsResponse);\n\n      setDetailsResponse(detailsResponse.data);\n      const endTime = performance.now();\n\n      // Check completeness of the response\n      const isResponseComplete = expectedAttributes.every((attr) => attr in detailsResponse.data.data);\n\n      if (isResponseComplete) {\n        toast.success('Video details loaded successfully!');\n        // Calculate and update the time taken\n        const timeTaken = (endTime - startTime) / 100; // Convert to seconds\n        setTimeTaken(timeTaken);\n\n        // Auto-load the uploaded video into the video player\n        if (videoRef.current) {\n          // Assuming the video URL is correctly returned from the API\n          const videoUrl = detailsResponse.data.data.videoS3Url;\n          videoRef.current.src = videoUrl;\n          videoRef.current.load();\n          videoRef.current.play(); // Auto-play the video if needed\n        }\n      } else {\n        setLoadingMessage('Loading all video details...');\n        console.log(\n          'Incomplete response. Missing attributes:',\n          expectedAttributes.filter((attr) => !(attr in detailsResponse.data.data))\n        );\n        // toast.error(\"Incomplete response. Give it some time.\");\n      }\n    } catch (error) {\n      // toast.error(\"Error getting video details. Please try again later.\");\n      console.error('Error getting video details:', error);\n      setLoadingMessage('Error getting video details. Please try again later.');\n    } finally {\n      setLoading(false);\n      setLoadingMessage(null); // Reset loading message after handling response\n    }\n  };\n\n  return (\n    <div className='flex flex-col md:pt-15 pt-5'>\n      <div className='flex flex-col md:flex-row justify-between gap-4'>\n        <div className='text-neutral-900 flex flex-col gap-4 md:flex'>\n          <div>\n            <p className='font-[degularbold] md:text-2xl text-xl'>Upload Video Logic</p>\n            <p className='font-[degularmedium] text-gray-600'>\n              To uplod a video and stream you first login with your phone number. The token and cookies for that user is stored and used to upload the\n              vide and view the video respectively. <br /> Enter the video details - visibilty and description. The other parameters for a video are\n              added in the background. <br />\n            </p>\n          </div>\n          <div className='flex gap-2 justify-between'>\n            <div className='flex flex-col gap-1 w-full'>\n              <div>\n                <label htmlFor='phone' className='font-semibold text-lg'>\n                  Enter Phone Number:\n                </label>\n                <input\n                  id='phone'\n                  type='text'\n                  value={phone}\n                  onChange={handlePhoneChange}\n                  placeholder='Enter phone number'\n                  className='bg-gray-100 text-gray-900 p-2 rounded-md mt-2 w-full focus:outline-none focus:ring focus:border-blue-500'\n                />\n                <button\n                  onClick={handleCheckPhone}\n                  className='bg-blue-500 text-white p-2 rounded-md mt-2 hover:bg-blue-700 focus:outline-none focus:ring focus:border-blue-500 w-full'\n                  disabled={loading}\n                >\n                  {loading ? 'Checking...' : 'Check Phone'}\n                </button>\n              </div>\n              <div className='mt-4 w-full'>\n                <h2 className='text-lg font-semibold mb-2'>Response:</h2>\n                <pre className='bg-gray-100 p-4 text-sm rounded-md overflow-auto'>{responseText}</pre>\n              </div>\n              <ToastContainer />\n            </div>\n            <div className='flex flex-col gap-1 w-full'>\n              <div>\n                <label htmlFor='video-details' className='font-semibold text-lg'>\n                  Video Details:\n                </label>\n                <input\n                  id='video-details'\n                  type='text'\n                  value={phone} // Assuming this should be replaced with appropriate state variable\n                  onChange={handleDescriptionChange}\n                  placeholder='Enter description'\n                  className='bg-gray-100 text-gray-900 p-2 rounded-md mt-2 w-full focus:outline-none focus:ring focus:border-blue-500'\n                />\n              </div>\n              <div className='relative'>\n                <select\n                  id='visibility'\n                  className='bg-gray-100 text-gray-900 p-2 rounded-md mt-2 w-full focus:outline-none focus:ring focus:border-blue-500'\n                >\n                  <option value='public'>Public</option>\n                  <option value='private'>Private</option>\n                  <option value='personal'>Personal</option>\n                </select>\n                <div className='pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700'>\n                  <svg className='w-4 h-4 fill-current' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='currentColor'>\n                    <path\n                      fillRule='evenodd'\n                      d='M7.293 11.293a1 1 0 0 1 1.414 0L10 12.586l1.293-1.293a1 1 0 1 1 1.414 1.414l-2 2a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 0-1.414 1 1 0 0 1 0-1.414z'\n                    />\n                  </svg>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className='flex flex-col gap-2 md:w-1/2'>\n          <div className='mt-4'>\n            <p className='font-[degularsemibold] text-xl'>Select Video</p>\n            <div className='w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-500'>\n              <FileBase64 multiple={false} onDone={handleVideoUpload} />\n            </div>\n          </div>\n          <button\n            onClick={handleUpload}\n            className='w-full bg-blue-500 text-white p-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring focus:border-blue-500'\n          >\n            Upload Video\n          </button>\n          <button\n            onClick={handleGetDetails}\n            className='w-full bg-green-500 text-white p-2 rounded-md mt-4 hover:bg-blue-700 focus:outline-none focus:ring focus:border-blue-500'\n          >\n            Get Details\n          </button>\n        </div>\n      </div>\n      <div className='w-full border-t mt-4 border-gray-300' />\n\n      {loading && (\n        <div className='mt-4 flex justify-center'>\n          <p className='text-lg font-bold mb-2'>{loadingMessage || 'Loading...'}</p>\n        </div>\n      )}\n\n      {uploadResponse && (\n        <div className='mt-4 '>\n          <h2 className='text-lg font-bold mb-2'>Upload Response:</h2>\n          <div>{/* Add any additional elements or styling here if needed */}</div>\n          <pre className='bg-gray-100 overflow-auto p-4 text-sm rounded-md'>{JSON.stringify(uploadResponse, null, 2)}</pre>\n        </div>\n      )}\n\n      {detailsResponse && detailsResponse.data && expectedAttributes.every((attr) => attr in detailsResponse.data) && (\n        <div className='mt-4 '>\n          <h2 className='text-lg font-bold mb-2'>Full Video Details:</h2>\n          <div>{/* Add any additional elements or styling here if needed */}</div>\n          <pre className='bg-gray-100 overflow-auto p-4 text-sm rounded-md'>{JSON.stringify(detailsResponse, null, 2)}</pre>\n        </div>\n      )}\n\n      <div className='mt-4'>\n        <h2 className='text-lg font-bold mb-2'>Original Uploaded Video:</h2>\n        <video ref={videoRef} controls width='100%' height='auto'>\n          Your browser does not support the video tag.\n        </video>\n      </div>\n\n      <ToastContainer />\n    </div>\n  );\n};\n\nexport default Transactions;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}